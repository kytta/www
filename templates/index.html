<!DOCTYPE html>
<html lang="{{ lang }}">
<head>
	<meta charset="UTF-8" />
	<meta http-equiv="X-UA-Compatible" content="IE=edge" />
	<meta name="viewport" content="width=device-width, initial-scale=1.0" />
	<title>{% block title %}{{ config.title }}{% endblock title %}</title>
	<meta name="description" content="{% block description %}{{ config.description }}{% endblock description %}" />

	<link rel="stylesheet" href="{{ get_url(path="/0up.css") }}?h={{ get_hash(path="/0up.css", sha_type=256) }}" media="all">
	<link rel="stylesheet" href="{{ get_url(path="/600up.css") }}?h={{ get_hash(path="/600up.css", sha_type=256) }}" media="screen and (min-width: 600px)">
	<link rel="stylesheet" href="{{ get_url(path="/900up.css") }}?h={{ get_hash(path="/900up.css", sha_type=256) }}" media="screen and (min-width: 900px)">

	{% block rss %}
	<link rel="alternate" type="application/atom+xml" title="Blog feed" href="{{ get_url(path="/blog/atom.xml", trailing_slash=false) }}">
	{% endblock rss %}

	<link rel="icon" href="/favicon.ico" sizes="any">
	<link rel="icon" href="/icon.svg" type="image/svg+xml">
	<link rel="apple-touch-icon" href="/apple-touch-icon.png">
	<link rel="manifest" href="/manifest.webmanifest">

	<meta name=generator content="Zola">
</head>
<body>
	<header>
		<nav>
			<ul>
				<li class="title">
					{% set icon_data = load_data(path="static/icon.svg") %}
					<a href="{{ get_url(path="/") }}" class="to-main {% if current_path == "/" %}active{% endif %}">{{- icon_data | safe -}}</a>
				</li>

				{% set menu_object = false %}

				{% for entry in config.extra.menu %}
					{% if entry.type == "page" %}
						{% set menu_object = get_page(path=entry.path) %}
					{% elif entry.type == "section" %}
						{% set menu_object = get_section(path=entry.path) %}
					{% endif %}

					{% if menu_object != false %}
						<li>
							<a href="{{ get_url(path=menu_object.path) }}" class="{% if current_path == menu_object.path %}active{% endif %}">
								{{ entry.title | default(value=menu_object.title) }}
							</a>
						</li>
					{% endif %}
				{% endfor %}
			</ul>
		</nav>
	</header>

	<main class="{% if current_path == "/" %}index{% endif %}">
		{% block content %}
		<section>
			<h2>Recent posts</h2>

			{% set blog = get_section(path="blog/_index.md") %}
			{% for post in blog.pages | slice(end=5) %}
			<article>
				<h3>
					<a href="{{ get_url(path=post.path) }}">
						{{ post.title }}
					</a>
				</h3>
				<p>
					{{ post.summary | default(value="") | safe | striptags }}
					<time datetime="{{ post.date | date(format="%+")}}">{{ post.date | date(format="%d %h %Y")}}</time>
				</p>
			</article>
			{% endfor %}
		</section>
		{% endblock content %}
	</main>
	<script src="//gc.zgo.at/count.v3.js"
		crossorigin="anonymous"
		integrity="sha384-QGgNMMRFTi8ul5kHJ+vXysPe8gySvSA/Y3rpXZiRLzKPIw8CWY+a3ObKmQsyDr+a"
		async
		data-goatcounter="https://kytta.goatcounter.com/count"></script>
</body>
</html>
